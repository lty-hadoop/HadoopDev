<!-- <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title>Document</title>
</head>
<body>
        <div class="pageList_wrap mg_t20 ">

            <div class="jump">
                跳转至
                <input type="text" class="selectPage">
                页
                <button class="goPage">GO</button>
            </div>
            <ul class="pageList">
                <li class="prev">&lt;</li>
                <li class="next">&gt;</li>
                <li class="first">首页</li>
                <li class="last">尾页</li>
            </ul>
            <p class="pageInfo"></p>
        </div>
</body>
<script type="text/javascript" src="js/common/jquery-2.1.1.js"></script>
<script>
/**
 * 分页
 * @param data
 * @constructor
 */
//html调用
//pageList_wrap 样式可以自行修改
// <div class="pageList_wrap">
//     <div class="jump">
//     <input type="text" id="selectPage"><button id="goPage">GO</button>
//     </div>
//     <ul class="pageList">
//     <li id="prev">前一页</li>
//     <li id="next">下一页</li>
//     <li id="first">首页</li>
//     <li id="last">尾页</li>
//     </ul>
//     </div>

//js调用

// var aa = new Ipage({
//      el:''
//     pageCount:110,  //数据总条数
//     pageSize:10,    //每页显示数据条数
//     showPage:8,     //显示页码数
//     callBack:function (data) {     //点击按钮回调函数
//         console.log(data)
//     }
// })
function Ipage(data){
    //获取参数赋值给构造函数
    $("[data-page]").remove();
    this.pageCount =data.pageCount;
    this.pageSize = data.pageSize||10;
    this.showPage = data.showPage||5;
    this.callBack = data.callBack;
    //声明一个属性用于储存动态生成的页码
    this.pageNav = "";
    //声明开始页码数
    this.starPage = 1 ;
    //声明结束页码数
    this.endPage = data.showPage;
    //用于储存选中的页码
    this.pageNow = 1;

    //初始化页面
    this.init();
    //初始化执行callback
    this.callBack(this.pageNow,this.pagetol);
    //绑定点击事件
    //页码点击事件
    this.jump();
    //计算偏移量
    this.pageOffset = Math.floor(this.showPage/2);
    this.disabled(this.pageNow);
}
Ipage.prototype = {
    //初始化分页列表
    init:function () {
        var $showPage = this.showPage;
        var $pageSize = this.pageSize;
        //计算页码总数
        this.pagetol =  this.pageCount % $pageSize == 0 ? this.pageCount/$pageSize:Math.ceil(this.pageCount/$pageSize);
        this.endPage = this.pagetol <= $showPage ? this.pagetol:$showPage;
        //添加页数
        for(var i = this.starPage ;i <= this.endPage;i++){
            if(i == 1)  { this.pageNav += "<li data-page='"+i+"'class='pageAct'>"+i+"</li>"; continue}
            this.pageNav +="<li data-page='"+i+"'>"+i+"</li>";
        }
        $(".next").before(this.pageNav)
    },
    //动态生成的页码跳转
    jump:function () {
        var This = this;
        //页码动态绑定点击事件
        $("[data-page]").on("click",function () {
            //获取点击页码
            var index = $(this).attr("data-page");
            This.pageNow = parseInt(index) ;
            //添加页码选中样式
            $(this).addClass("pageAct").siblings().removeClass("pageAct");
            This.operation();
        });
        $(".prev").click(function () {
            if(This.pageNow==1) return;
            --This.pageNow;
            This.operation();
        });
        $(".next").click(function () {
            if(This.pageNow == This.pagetol) return;
            ++This.pageNow;
            This.operation();
        });
        $(".first").click(function () {
            This.pageNow = 1;
            This.operation();
        });
        $(".last").click(function () {
            This.pageNow = This.pagetol;
            This.operation();
        });
        $(".goPage").click(function () {
            var goPage =parseInt($(".selectPage").val());
            if(isNaN(goPage)||goPage>This.pagetol||goPage < 1) {
                return
            };
            This.pageNow = goPage;
            This.operation();
        });
    },
    //显示页码修改
    bothPage:function (currentPage) {
        var pageNow = parseInt(currentPage);
        //当总页数大于显示页数时
        if(this.pagetol > this.showPage){
            //当选中当前页数大于 页数偏移量时
            if(pageNow > this.pageOffset){
                this.starPage = pageNow - this.pageOffset;
                this.endPage = this.pagetol>(pageNow + this.pageOffset)?(pageNow + this.pageOffset):this.pagetol ;

            }else{
                this.starPage = 1;
                this.endPage = this.showPage ;
            }
            if(this.pagetol < this.pageOffset + pageNow){
                var star = this.starPage - (pageNow + this.pageOffset - this.endPage);
                this.starPage = (this.showPage/2)==this.pageOffset? star+1 : star;
            }
        }
        //修改页码
        var pageNum = 0;
        for(var i = this.starPage ;i <= this.endPage;i++,pageNum++){
            $("[data-page]").eq(pageNum).html(i).attr("data-page",i);
            $("[data-page='"+pageNow+"']").addClass("pageAct").siblings().removeClass("pageAct");
        }
    },
    //按钮禁止样式
    disabled : function (index) {
        if(index != 1) {
            $(".prev").removeClass("disabled");
            $(".first").removeClass("disabled");
        }else{
            $(".prev").addClass("disabled");
            $(".first").addClass("disabled");
        }
        if(index == this.pagetol){
            $(".next").addClass("disabled");
            $(".last").addClass("disabled");
        }else{
            $(".next").removeClass("disabled");
            $(".last").removeClass("disabled");
        }
    },
    //点击操作
    operation:function () {
        this.bothPage(this.pageNow);
        this.disabled(this.pageNow);
        this.callBack(this.pageNow);
    }
};
var aa = new Ipage({
    pageCount:110,  //数据总条数
    pageSize:10,    //每页显示数据条数
    showPage:8,     //显示页码数
    callBack:function (data) {     //点击按钮回调函数
        console.log(data)
    }
})
</script>
</html> -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title>分页</title>
    <link rel="stylesheet" type="text/css" href="css/style.css">
    <style>
    .div{
       width:500px;height:200px;margin:50px auto;background:#fff;
   }
    </style>
</head>
<body class="w_auto">
<div class="div">
    <div class="pagePlugin" >
    </div>
</div>
<script type="text/javascript" src="js/common/jquery-2.1.1.js"></script>
<script>
    function Initpage(data){
        //目标元素
        this.$elem = $('.'+data.el);
        //一次显示多少页
        this.showPage = data.showPage||5;
        //当前页码
        this.nowPage = data.startPage||1;
        //总条数
        this.itemSize = data.itemSize;
        //一次显示多少条数据
        this.showNum = data.showNum||10;
        //总页数
        this.pageNum =this.itemSize%this.showNum==0?this.itemSize/this.showNum:Math.ceil(this.itemSize/this.showNum);
        //初始页
        this.startPage = data.startPage||1;
        //页码偏移量
        this.pageOffset = Math.floor(this.showPage/2);
        this.callBack = data.callBack||function(){};
        this.init();
        this.render();
    }
    Initpage.prototype = {
        init : function(){
            this.$ul = $('<ul class=" pageInfo dis_f jst_r bd_1 " style="border-radius: 2px;"><li class="first bd_1 line_h30 text_c w_30 h_30">&lt;&lt;</li><li class="prev bd_1 line_h30 text_c w_30 h_30 ">&lt;</li>' +
                '            <li class="next bd_1 line_h30 text_c w_30 h_30">&gt;</li>' +
                '            <li class="last bd_1 line_h30 text_c w_30 h_30">&gt;&gt;</li></ul>');
            this.$elem.append(this.$ul);
        },
        render:function(){
            //渲染初始化页面
            this.$pageLi = '';
            this.endPage = this.pageNum <= this.showPage ? this.pageNum:this.showPage;
            for(var i = this.startPage;i<= this.endPage;i++){
                if(this.nowPage==i){
                    this.$li = '<li class="bd_1 line_h30 pageLi active text_c w_30 h_30">'+i+'</li>';
                }else{
                    this.$li = '<li class="bd_1 line_h30 pageLi text_c w_30 h_30">'+i+'</li>';
                }
                this.$pageLi += this.$li;
            }
            this.$ul.find('.next').before(this.$pageLi);
            this.bindEvent();
        },
        bindEvent:function(){
            var _this = this;
            //直接点击页码
            this.$ul.on("click",".pageLi",function(){
                    _this.nowPage = parseInt($(this).html());
                    _this.setPage();

            });
            //点击下一页
            this.$ul.on("click",".next",function(){
                if(_this.nowPage==_this.pageNum)return;
                _this.nowPage++;
                _this.setPage(_this.nowPage);

            });
            //点击上一页
            this.$ul.on("click",".prev",function(){
                if( _this.nowPage==1)return;
                _this.nowPage--;
                _this.setPage();
            });
            //点击第一页
            this.$ul.on("click",".first",function(){
                if( _this.nowPage == 1)return;
                _this.nowPage = 1;
                _this.setPage();
            });
            //点击到最后一页
            this.$ul.on("click",".last",function(){
                if( _this.nowPage == _this.pageNum)return;
                _this.nowPage = _this.pageNum;
                _this.setPage();
            });
        },
        setPage : function(){
            if(this.pageNum > this.showPage){
                //当选中当前页数大于 页数偏移量时
                if(this.nowPage > this.pageOffset){
                    this.starPage = this.nowPage - this.pageOffset;
                    this.endPage = this.pageNum>(this.nowPage + this.pageOffset)?(this.nowPage + this.pageOffset):this.pageNum ;

                }else{
                    this.starPage = 1;
                    this.endPage = this.showPage ;
                }
                if(this.pageNum < this.pageOffset + this.nowPage ){
                    var star = this.starPage - (this.nowPage  + this.pageOffset - this.endPage);
                    this.starPage = (this.showPage/2)==this.pageOffset? star+1 : star;
                }
            }
            //修改页码
            var index = 0;
            for(var i = this.starPage;i<= this.endPage;i++,index++){
                this.$ul.find(".pageLi").eq(index).html(i);
                if(this.nowPage == i){
                    this.$ul.find(".pageLi").eq(index).addClass('active').siblings().removeClass('active');
                }

            }
            this.callBack(this.nowPage);
        }
    }

var data = {
        el : 'pagePlugin',
    showNum : 10,
    itemSize : 102,
    showPage:8,
    callBack : function(data){
            console.log(data)
    }
};
    var aa = new Initpage(data);

</script>
</body>
</html>
